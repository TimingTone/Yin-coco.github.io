<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>String | Yin-coco</title><meta name="description" content="String"><meta name="keywords" content="Algorithms,DS"><meta name="author" content="Yin-coco"><meta name="copyright" content="Yin-coco"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/yin.png"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://yoursite.com/2019/10/05/String/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="String"><meta name="twitter:description" content="String"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta property="og:type" content="article"><meta property="og:title" content="String"><meta property="og:url" content="http://yoursite.com/2019/10/05/String/"><meta property="og:site_name" content="Yin-coco"><meta property="og:description" content="String"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="送东阳马生序" href="http://yoursite.com/2019/10/06/送东阳马生序/"><link rel="next" title="舟夜书所见" href="http://yoursite.com/2019/10/05/月夜书所见/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Bookmark',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  copyright: {"languages":{"author":"Author: Yin-coco","link":"Link: http://yoursite.com/2019/10/05/String/","source":"Source: Yin-coco","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  copy_copyright_js: true
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Yin-coco</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="http://upload.art.ifeng.com/2018/0403/1522726422907.jpg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">3</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">6</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ADT"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">ADT</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Definition"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">Definition</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Terminology"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">Terminology</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Function-Interfaces"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">Function Interfaces</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#String-Matching"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">String Matching</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Grep"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">Grep</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Pattern-matching"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">Pattern matching</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Algorithm-Evaluation"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">Algorithm Evaluation</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Brute-Force-Match"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">Brute Force Match</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Conception"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">Conception</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Implementation"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">Implementation</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Version-one"><span class="toc_mobile_items-number">3.2.1.</span> <span class="toc_mobile_items-text">Version one</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Version-Two"><span class="toc_mobile_items-number">3.2.2.</span> <span class="toc_mobile_items-text">Version Two</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#KMP-Algorithm"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">KMP Algorithm</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#From-memory-to-predictive-power"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">From memory to predictive power</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Query-Table"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">Query Table</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Instance"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">Instance</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Understanding-of-next-table"><span class="toc_mobile_items-number">4.4.</span> <span class="toc_mobile_items-text">Understanding of next[] table</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Implementation-of-KMP"><span class="toc_mobile_items-number">4.5.</span> <span class="toc_mobile_items-text">Implementation of KMP</span></a></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ADT"><span class="toc-number">1.</span> <span class="toc-text">ADT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Definition"><span class="toc-number">1.1.</span> <span class="toc-text">Definition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Terminology"><span class="toc-number">1.2.</span> <span class="toc-text">Terminology</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Function-Interfaces"><span class="toc-number">1.3.</span> <span class="toc-text">Function Interfaces</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String-Matching"><span class="toc-number">2.</span> <span class="toc-text">String Matching</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Grep"><span class="toc-number">2.1.</span> <span class="toc-text">Grep</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pattern-matching"><span class="toc-number">2.2.</span> <span class="toc-text">Pattern matching</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Algorithm-Evaluation"><span class="toc-number">2.3.</span> <span class="toc-text">Algorithm Evaluation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Brute-Force-Match"><span class="toc-number">3.</span> <span class="toc-text">Brute Force Match</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Conception"><span class="toc-number">3.1.</span> <span class="toc-text">Conception</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Implementation"><span class="toc-number">3.2.</span> <span class="toc-text">Implementation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Version-one"><span class="toc-number">3.2.1.</span> <span class="toc-text">Version one</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Version-Two"><span class="toc-number">3.2.2.</span> <span class="toc-text">Version Two</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#KMP-Algorithm"><span class="toc-number">4.</span> <span class="toc-text">KMP Algorithm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#From-memory-to-predictive-power"><span class="toc-number">4.1.</span> <span class="toc-text">From memory to predictive power</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Query-Table"><span class="toc-number">4.2.</span> <span class="toc-text">Query Table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Instance"><span class="toc-number">4.3.</span> <span class="toc-text">Instance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Understanding-of-next-table"><span class="toc-number">4.4.</span> <span class="toc-text">Understanding of next[] table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Implementation-of-KMP"><span class="toc-number">4.5.</span> <span class="toc-text">Implementation of KMP</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png)"><div id="post-info"><div id="post-title"><div class="posttitle">String</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2019-10-05<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2019-10-06</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Data-structures/">Data structures</a></span><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">404</span><span class="post-meta__separator">|</span><span>Reading time: 2 min</span><span class="post-meta__separator">|</span><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><p>From the perspective of abstract data types or specific implementation, String is more simple than the data structures I previously described. So we can spend more time for discussion of related algorithms, especially the string matching algorithm. </p>
<p>In the next section, let’s take a look from the perspective of ADT. What functional interfaces should be provided as a class data structure.</p>
<h2 id="ADT"><a href="#ADT" class="headerlink" title="ADT"></a>ADT</h2><h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h3><p>In short, the string is a finite sequence consists of a series of characters from a character table. </p>
<blockquote>
<p>Generally, each member of the string is called a character. And the string is a linear sequence composed of several characters from the front to the rear. </p>
</blockquote>
<p>String arranges in the order of a linear array. With respect to the general linear sequences, string structure has more distinctive features.</p>
<p>One of the most prominent characteristic is characters of a string of does not necessarily have a lot of species. But the total number of characters involved in string constitutes the so-called string length often has much higher magnitude relatively. </p>
<p>Take English articles as an example, a typical English article has about thousands of characters. And all of these characters are nothing more than uppercase or lowercase letters. Coupled with space, and a few punctuations.</p>
<p>Every program we write such as typical C or C ++ program, can also be considered to be a string. Although length of such strings would normally be up to thousands or tens of thousands of characters, they are composed of nothing more than 95 printable characters, carriage return and line feed. </p>
<p>……</p>
<p>Yes, all of these examples tell us length of string we discussed here is far greater than the length of the alphabet actually.</p>
<h3 id="Terminology"><a href="#Terminology" class="headerlink" title="Terminology"></a>Terminology</h3><p>To facilitate the following discussion, We unify some of the terminology and notation about string first.</p>
<blockquote>
<p>Generally, if a string called <code>S</code> is constituted by n characters. All characters from front to back will be numbered from 0 to <code>n-1</code>. And in accordance with our usual practice, we mark it as <code>S [0, n)</code>. The character ranking k is accordingly denoted as <code>S [k]</code>.</p>
<p>The two strings are equal: <code>S[0, n) = T[0, m)</code>. There are two conditions.</p>
</blockquote>
<ul>
<li><p>Firstly, their length is equal.($n = m$)</p>
</li>
<li><p>Secondly, all the characters must be equal by pair.($S[i] = T[i]$)</p>
</li>
</ul>
<blockquote>
<p>Sub-string: The substring designated by i and k is k consecutive characters beginning with rank i.</p>
</blockquote>
<script type="math/tex; mode=display">substr(i, k) = S[i, i+k), (0<=i<n, 0<=k)</script><blockquote>
<p>Prefix: A special case for substring. Specifically, the so-called prefix of length k is the first k characters.</p>
</blockquote>
<script type="math/tex; mode=display">S.prefix(k) = S.substr(0, k) = S[0, k), (0 <= k <= n)</script><blockquote>
<p>Suffix: Specifically, the so-called suffix of length k is k characters terminated at the end.</p>
</blockquote>
<script type="math/tex; mode=display">S.suffix(k) = S.substr(n-k, k) = S[n-k, n), (0 <= k <= n)</script><blockquote>
<p>Relation:</p>
</blockquote>
<script type="math/tex; mode=display">S.substr(i, k) = S.prefix(i+k).suffix(k)</script><blockquote>
<p>Empty string: The length of the string n is 0.</p>
</blockquote>
<p>Pay attention, the empty string is not the same as string consisting of space.</p>
<p>Unlike other types of string, length of empty string is 0.</p>
<p>To simplify the discussion we might follow, we unify that empty string is sub-string of any string. It is also prefix and suffix of any string. </p>
<p>We also agreed to unify that any string is its own sub-string and prefix and suffix.</p>
<p>Conversely, substring, prefix and suffix strictly shorter than the original string are also called true substring, true prefix and true suffix.</p>
<h3 id="Function-Interfaces"><a href="#Function-Interfaces" class="headerlink" title="Function Interfaces"></a>Function Interfaces</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Interfaces</th>
<th>Direction</th>
</tr>
</thead>
<tbody>
<tr>
<td>length()</td>
<td>current total number of characters contained in the string</td>
</tr>
<tr>
<td>chartAt(i)</td>
<td>return char at rank i</td>
</tr>
<tr>
<td>substr(i, k)</td>
<td>remove substr(i, k)</td>
</tr>
<tr>
<td>prefix(k)</td>
<td>remove prefix(k)</td>
</tr>
<tr>
<td>suffix(k)</td>
<td>remove suffix(k)</td>
</tr>
<tr>
<td>concat(T)</td>
<td>link a specified string T with the current string S as a suffix</td>
</tr>
<tr>
<td>equal(T)</td>
<td>judge whether the current string S equals to T</td>
</tr>
<tr>
<td>indexOf(P)</td>
<td>judge whether there is a substring exactly equals to given string P in the current string S</td>
</tr>
</tbody>
</table>
</div>
<h2 id="String-Matching"><a href="#String-Matching" class="headerlink" title="String Matching"></a>String Matching</h2><h3 id="Grep"><a href="#Grep" class="headerlink" title="Grep"></a>Grep</h3><p>If you are using Unix or Linux, the grep would not be strange to you:</p>
<blockquote>
<p><code>grep &lt;pattern&gt; &lt;text&gt;</code></p>
</blockquote>
<ul>
<li><p>text: T = Welcome to my <font color="#40E0D0">blog</font></p>
</li>
<li><p>pattern: P = <font color="#40E0D0">blog</font></p>
</li>
</ul>
<blockquote>
<p>n = |T|<br>m = |P|<br>n &gt;&gt; m &gt;&gt; 2</p>
</blockquote>
<h3 id="Pattern-matching"><a href="#Pattern-matching" class="headerlink" title="Pattern matching"></a>Pattern matching</h3><ul>
<li><p>detection: whether the  string appears in the text</p>
</li>
<li><p>location: if the pattern string appears, we are also concerned about where it appears in the text string in particular</p>
</li>
<li><p>counting: how many times pattern string appears totally</p>
</li>
<li><p>enumeration: in which several specific location the pattern string appears in the text string </p>
</li>
</ul>
<h3 id="Algorithm-Evaluation"><a href="#Algorithm-Evaluation" class="headerlink" title="Algorithm Evaluation"></a>Algorithm Evaluation</h3><p>In order to judge the performance of the algorithms more objectively and accurately, We need to make targeted refinement and adjustment to the corresponding standards and policies. Such as referring to common mode of other algorithms.</p>
<p>In fact a simple and effective approach is to considere success and failures respectively.</p>
<p>……</p>
<h2 id="Brute-Force-Match"><a href="#Brute-Force-Match" class="headerlink" title="Brute Force Match"></a>Brute Force Match</h2><h3 id="Conception"><a href="#Conception" class="headerlink" title="Conception"></a>Conception</h3><p>As the name suggests, this kind of algorithm’s thinking and strategy are straightforward, very intuitive and easy to understand. But in turn, the name also implies that its efficiency is very low. However, these algorithms also has its value to exist. They can help you understand the calculation process of string matching. It also provides a starting point and reference for our subsequent improvements.</p>
<p><img alt data-src="/img/con.png" class="lozad"></p>
<p>The brute-force algorithm we are talking is really straightforward on idea. We find that the so-called successful match must be aligned with respect to a certain position. Such alignment position at best, is no more than the length of the text string that is n. So if you do not mind the cost calculation. We just need to try and check each position one by one. Naturally we can solve the string matching problem.</p>
<p>The most natural way is just from front to back. With single character spacing, align the mode string with the text string by turns and check. Obviously as long as one pair of characters are mismatched, the whole it is impossible to match completely. So this means that the current location of the alignment can be ruled out. So then we need to try next alignment position.</p>
<h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><p>The brute force algorithm above can be implemented in at least two versions. They can be easily derived into more efficient algorithms as follow. So we make a presentation to them here.</p>
<h4 id="Version-one"><a href="#Version-one" class="headerlink" title="Version one"></a>Version one</h4><figure class="highlight c++"><figcaption><span> </span><a href="https://dsa.cs.tsinghua.edu.cn/~deng/ds/src_link/string_pm_bf1/pm_brute1.cpp.htm" target="_blank" rel="noopener">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">match</span> <span class="params">( <span class="keyword">char</span>* P, <span class="keyword">char</span>* T )</span> </span>&#123;</span><br><span class="line">	<span class="keyword">size_t</span> n = <span class="built_in">strlen</span> ( T ), i = <span class="number">0</span>; </span><br><span class="line">	<span class="keyword">size_t</span> m = <span class="built_in">strlen</span> ( P ), j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> ( j &lt; m &amp;&amp; i &lt; n ) </span><br><span class="line">		<span class="keyword">if</span> ( T[i] == P[j] )</span><br><span class="line">			&#123; i ++;  j ++; &#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			&#123; i -= j - <span class="number">1</span>; j = <span class="number">0</span>; &#125;</span><br><span class="line">	<span class="keyword">return</span> i - j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>When the matching is failure, $i = n$, $j &lt; m$, $i-j &gt; n-m$.</p>
</blockquote>
<h4 id="Version-Two"><a href="#Version-Two" class="headerlink" title="Version Two"></a>Version Two</h4><figure class="highlight c++"><figcaption><span> </span><a href="https://dsa.cs.tsinghua.edu.cn/~deng/ds/src_link/string_pm_bf2/pm_brute2.cpp.htm" target="_blank" rel="noopener">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">match</span> <span class="params">( <span class="keyword">char</span>* P, <span class="keyword">char</span>* T )</span> </span>&#123; </span><br><span class="line">	<span class="keyword">size_t</span> n = <span class="built_in">strlen</span> ( T ), i = <span class="number">0</span>; </span><br><span class="line">	<span class="keyword">size_t</span> m = <span class="built_in">strlen</span> ( P ), j; </span><br><span class="line"> 	<span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; n - m + <span class="number">1</span>; i++ ) &#123; </span><br><span class="line">		<span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; m; j++ )</span><br><span class="line">			<span class="keyword">if</span> ( T[i + j] != P[j] ) <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">if</span> ( j &gt;= m ) <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="KMP-Algorithm"><a href="#KMP-Algorithm" class="headerlink" title="KMP Algorithm"></a>KMP Algorithm</h2><h3 id="From-memory-to-predictive-power"><a href="#From-memory-to-predictive-power" class="headerlink" title="From memory to predictive power"></a>From memory to predictive power</h3><p>KMP algorithm can ensure that even in the worst case the running time is not more than linear. </p>
<p>Using principles and methods of such information can be represented by this figure.</p>
<p><img alt data-src="/img/mem.png" class="lozad"></p>
<p>We mismatch at T [i] and P [j] for the first time. And in turn, the prefix P [j] corresponding to and the substring T [i] corresponding to match exactly. As long as we take full advantage of such information, we can rule out a lot of alignment positions quickly. So that the pattern string can slide forward quickly and drastically. Also using such information, we even do not have to repeat any comparison before T [i]. That is to say, in the next alignment position of pattern string, the new round can simply start from T [i] and the new P [j].</p>
<p><img alt data-src="/img/pre.png" class="lozad"></p>
<p>This is an example.  Relative to the current position of the alignment, Our first round of match fail between E and O. Please note that in this case we do not have to slavishly move the pattern string. It can be bravely moved forward three characters. That is to say the previous two alignment position can be ruled out. The reason is if a position if worthy of alignment, One of its necessary condition is that the corresponding first character should be the same as the first character of the mode string. </p>
<p>Here we emphasize once again, all information about this substring are all obtained from the previous comparison.</p>
<p>As long as we are able to take full advantage of such information, We can obtain optimal results in two ways:</p>
<ul>
<li><p>On the one hand, we may greatly slide the mode string.</p>
</li>
<li><p>On the other hand we can avoid a lot of duplicate comparison.</p>
</li>
</ul>
<p>In order to optimize both aspects simultaneously, our algorithm actually only need a certain kind of predicting force.</p>
<blockquote>
<p>Specifically, that is, after every failure, which character of the model string should we make to be aligned with the character just failed of the text string. </p>
</blockquote>
<h3 id="Query-Table"><a href="#Query-Table" class="headerlink" title="Query Table"></a>Query Table</h3><p>How does KMP algorithm honor the memory and predictable force?</p>
<p>This method is very convenient and efficient. In essence, it is nothing more than an query table.</p>
<blockquote>
<p>The key trick of KMP algorithm here is to deal with all this m cases in advance and collate as a lookup table <code>next[0, m)</code>.</p>
</blockquote>
<p>After such a pretreatment, in subsequent rounds of comparison, once P [j] meets a mismatch at a position, we simply get that corresponding item from the look-up table and use it to update the previous j.</p>
<figure class="highlight c++"><figcaption><span> </span><a href="https://dsa.cs.tsinghua.edu.cn/~deng/ds/src_link/string_pm_kmp/pm_kmp.cpp.htm" target="_blank" rel="noopener">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">match</span> <span class="params">( <span class="keyword">char</span>* P, <span class="keyword">char</span>* T )</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* next = buildNext ( P );</span><br><span class="line"> 	<span class="keyword">int</span> n = ( <span class="keyword">int</span> ) <span class="built_in">strlen</span> ( T ), i = <span class="number">0</span>; </span><br><span class="line"> 	<span class="keyword">int</span> m = ( <span class="keyword">int</span> ) <span class="built_in">strlen</span> ( P ), j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> ( j &lt; m  &amp;&amp; i &lt; n )</span><br><span class="line">		<span class="keyword">if</span> ( <span class="number">0</span> &gt; j || T[i] == P[j] )</span><br><span class="line"> 			&#123; i ++;  j ++; &#125; </span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line"> 			j = next[j];</span><br><span class="line">	<span class="keyword">delete</span> [] next;</span><br><span class="line">	<span class="keyword">return</span> i - j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Instance"><a href="#Instance" class="headerlink" title="Instance"></a>Instance</h3><p><img alt data-src="/img/ins1.png" class="lozad"></p>
<p><img alt data-src="/img/ins2.png" class="lozad"></p>
<h3 id="Understanding-of-next-table"><a href="#Understanding-of-next-table" class="headerlink" title="Understanding of next[] table"></a>Understanding of next[] table</h3><script type="math/tex; mode=display">next[j] = \begin{cases}
0 & j = 1 \\
Max\{k | 1<k<j $&&$ 'p_1...p_{k-1}' = 'p_{j-k+1}...p_{j-1}'\} & {set is not empty} \\
1 & {other cases}
\end{cases}</script><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">j</th>
<th style="text-align:center">1 2 3 4 5 6 7 8</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">mode string</td>
<td style="text-align:center">a b a a b c a c</td>
</tr>
<tr>
<td style="text-align:center">next[j]</td>
<td style="text-align:center">0 1 1 2 2 3 1 2</td>
</tr>
</tbody>
</table>
</div>
<p>For example: j=6 &amp;&amp; p_1p_2=p_4p_5 \Rightarrow k=3, next[6]=3$ </p>
<p>Reference: <a href="http://www.xuetangx.com/courses/course-v1:TsinghuaX+30240184_2X+sp/courseware/4c294e9ea5b5433d831443e64f64bacb/d50c7a6f305c44f6aeae04d8aa66ea68/" target="_blank" rel="noopener">http://www.xuetangx.com/courses/course-v1:TsinghuaX+30240184_2X+sp/courseware/4c294e9ea5b5433d831443e64f64bacb/d50c7a6f305c44f6aeae04d8aa66ea68/</a></p>
<h3 id="Implementation-of-KMP"><a href="#Implementation-of-KMP" class="headerlink" title="Implementation of KMP"></a>Implementation of KMP</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">buildNext</span> <span class="params">( <span class="keyword">char</span>* P )</span> </span>&#123; </span><br><span class="line">	<span class="keyword">size_t</span> m = <span class="built_in">strlen</span> ( P ), j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span>* N = <span class="keyword">new</span> <span class="keyword">int</span>[m];</span><br><span class="line">	<span class="keyword">int</span> t = N[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span> ( j &lt; m - <span class="number">1</span> )</span><br><span class="line">		<span class="keyword">if</span> ( <span class="number">0</span> &gt; t || P[j] == P[t] ) &#123;</span><br><span class="line">			j ++; t ++;</span><br><span class="line">			N[j] = t; </span><br><span class="line">		&#125; <span class="keyword">else</span></span><br><span class="line">			t = N[t];</span><br><span class="line">	<span class="keyword">return</span> N;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buildNext</span><span class="params">(subStr T, <span class="keyword">int</span> next[])</span></span>&#123;</span><br><span class="line">	i=<span class="number">1</span>;	next[<span class="number">1</span>]=<span class="number">0</span>;	j=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i &lt; T[<span class="number">0</span>])&#123;</span><br><span class="line">		<span class="keyword">if</span>(j==<span class="number">0</span> || T[i]==T[j])&#123;</span><br><span class="line">			++i;	++j;</span><br><span class="line">			next[i] = j;</span><br><span class="line">		&#125;<span class="keyword">else</span></span><br><span class="line">			j = next[j];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Yin-coco</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2019/10/05/String/">http://yoursite.com/2019/10/05/String/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Algorithms/">Algorithms    </a><a class="post-meta__tags" href="/tags/DS/">DS    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/10/06/送东阳马生序/"><img class="prev_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>送东阳马生序</span></div></a></div><div class="next-post pull-right"><a href="/2019/10/05/月夜书所见/"><img class="next_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>舟夜书所见</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/10/03/Binary-Search-Tree/" title="Binary Search Tree"><img class="relatedPosts_cover lozad" data-src="/img/BST.png"><div class="relatedPosts_title">Binary Search Tree</div></a></div><div class="relatedPosts_item"><a href="/2019/10/04/Binary-Tree/" title="Binary Tree"><img class="relatedPosts_cover lozad" data-src="https://www.improgrammer.net/wp-content/uploads/2017/07/Binary-Tree-All-In-One.jpg"><div class="relatedPosts_title">Binary Tree</div></a></div></div><div class="clear_both"></div></div></div></div><footer><div id="footer"><div class="copyright">&copy;1/10/2019 - 2019 By Yin-coco</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion">繁</a><i class="nightshift fa fa-moon-o" id="nightshift" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script color="0,0,255" opacity="0.7" zindex="-1" count="99" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/js/canvas-nest.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body></html>